<mvc:View controllerName="missolicitudes.controller.NuevaSolicitud"
    xmlns:table="sap.ui.table" 
    xmlns:mvc="sap.ui.core.mvc" 
    displayBlock="true"
    xmlns="sap.m" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"
    >

    <Page showHeader="true" title="" showFooter="true" showNavButton="false">
        <content>
            <Panel height="auto" width="100%" headerText="Nueva Solicitud" expandable="true" expanded="true" expandAnimation="true" backgroundDesign="Solid">
                <content>
                    <form:Form width="100%" editable="true" visible="true">
                        <form:title/>
                        <form:formContainers>
                            <form:FormContainer visible="true">
                                <form:formElements>
                                    <form:FormElement id="fe_numero_solicitud" visible="true">
                                        <form:label>
                                            <Label text="Nº de Solicitud" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_numero_solicitud" placeholder="número de solicitud" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_empresa" visible="true">
                                        <form:label>
                                            <Label text="Empresa" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_empresa" placeholder="Empresa" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_usuario_solicitante" visible="true">
                                        <form:label>
                                            <Label text="Usuario solicitante" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_usuario_solicitante" placeholder="Empresa" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="entregar_a" visible="true">
                                        <form:label>
                                            <Label text="Entregar a" design="Standard" width="100%" required="true" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-entregar-a" items="{path: 'listaEntregarA>/ENTREGA_A'}" placeholder="Seleccione entregar a" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onEntregaAChange"
                                            selectedKey="{listaEntregarA>/EMAIL_PERSONA}" >
                                                <items>
                                                    <core:Item text="{listaEntregarA>NOMBRE_PERSONA}" enabled="true" key="{listaEntregarA>EMAIL}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                     <form:FormElement id="fe_ceco_beneficio" visible="true">
                                        <form:label>
                                            <Label text="CeCo de beneficio" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_ceco_beneficio" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_ceco_proyecto" visible="true">
                                        <form:label>
                                            <Label text="CeCo" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_ceco_proyecto" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="nro_proyecto" visible="true">
                                        <form:label>
                                            <Label text="N° de Proyecto" design="Standard" width="100%" required="true" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-nro-proyecto" items="{path: 'listaNroProyecto>/PROYECTO'}" placeholder="Seleccione número de proyecto" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onNroProyectoChange"
                                            selectedKey="{listaNroProyecto>/ID_PROYECTO}">
                                                <items>
                                                    <core:Item text="{listaNroProyecto>NRO_PROYECTO}" enabled="true" key="{listaNroProyecto>ID_PROYECTO}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_nombre_proyecto" visible="true">
                                        <form:label>
                                            <Label text="Nombre de proyecto" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_nombre_proyecto" enabled="false" showSuggestion="false" showValueHelp="false"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_evaluador" visible="true">
                                        <form:label>
                                            <Label text="Evaluador" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_evaluador" enabled="false" showSuggestion="false" showValueHelp="false" value="{oNuevaSolicitud>/solicitud/evaluador}"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="fe_referencia" visible="true">
                                        <form:label>
                                            <Label text="Referencia" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <Input id="in_referencia" placeholder="Ingresar referencia" enabled="true" showSuggestion="false" showValueHelp="false" value="{oNuevaSolicitud>/solicitud/referencia}"/>
                                        </form:fields>
                                    </form:FormElement>
                                </form:formElements>
                                <form:title/>
                            </form:FormContainer>
                        </form:formContainers>
                        <form:layout>
                            <form:ResponsiveGridLayout adjustLabelSpan="false" columnsL="2" labelSpanL="3" columnsM="1" labelSpanM="2" labelSpanS="12"/>
                        </form:layout>
                    </form:Form>
                </content>
            </Panel>
            <Panel height="auto" width="100%" headerText="" expandable="false" expanded="true" expandAnimation="true" backgroundDesign="Solid">
                        <headerToolbar>
                            <OverflowToolbar style="Clear">
                                <Title text=""/>
                                <ToolbarSpacer width=""/>
                                <Button press="onOpenDialogMaterial" text="Agregar Material" type="Default" icon="sap-icon://add" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                                <Button press="onOpenDialogHerramienta" text="Agregar Herramienta" type="Default" icon="sap-icon://add" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                                <Button press="onEliminarDetalle" text="Eliminar" type="Default" icon="sap-icon://delete" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                            </OverflowToolbar>
                        </headerToolbar>
                        <content>
                            <Table id="idNuevaHerramientaTable" items="{ path: 'oNuevaSolicitud>/solicitud/detalle'}" mode="SingleSelectLeft">
                                <columns>
                                    <Column >
                                        <Text text="Tipo" />
                                    </Column>
                                    <Column >
                                        <Text text="Código" />
                                    </Column>
                                    <Column >
                                        <Text text="Descripción" />
                                    </Column>
                                    <Column >
                                        <Text text="Unidad de Medida" />
                                    </Column>
                                    <Column >
                                        <Text text="Cantidad Solicitada" />
                                    </Column>
                                    <Column >
                                        <Text text="Fecha Proyectada de devolución" />
                                    </Column>
                                    <Column >
                                        <Text text="Observación" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectIdentifier title="{oNuevaSolicitud>tipo_desc}" />
                                            <Text text="{oNuevaSolicitud>codigo}" />
                                            <Text text="{oNuevaSolicitud>descripcion}" />
                                            <Text text="{oNuevaSolicitud>unidad_desc}" />
                                            <Text text="{oNuevaSolicitud>cantidad_solicitada}" />
                                            <Text text="{oNuevaSolicitud>fecha_devolucion}" />
                                            <Text text="{oNuevaSolicitud>observacion}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                            <OverflowToolbar >
                                <ToolbarSpacer />
                                <Button id="BtnFirstPressId" icon="sap-icon://close-command-field" press="onFirstPress" tooltip="First" enabled="{NavModel>/firstPageBtnEnable}" />
                                <Button id="BtnPreviousPressId" icon="sap-icon://navigation-left-arrow" press="onPreviousPress" tooltip="Previous" enabled="{NavModel>/firstPageBtnEnable}" />
                                <Text id="PageTextId" text="{i18n>page} {SolicitudesModel>/page} {i18n>of} {DetalleSolicitud>/totalPages}" />
                                <Button id="BtnNextPressId" icon="sap-icon://navigation-right-arrow" press="onNextPress" tooltip="Next" enabled="{NavModel>/nextPageBtnEnable}" />
                                <Button id="BtnLastPressId" icon="sap-icon://open-command-field" press="onLastPress" tooltip="Last" enabled="{NavModel>/nextPageBtnEnable}" />
                            </OverflowToolbar>

                        </content>
                    </Panel>
        </content>
        <footer>
            <OverflowToolbar width="100%" height="46px" design="Solid" enabled="true" visible="true">
                <ToolbarSpacer/>
                
                <Button press="onGuardarSolicitud" id="btn-save" text="Guardar" type="Emphasized" icon="sap-icon://save" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                <Button press="onEnviarSolicitud" id="btn-send" text="Enviar" type="Accept" icon="sap-icon://paper-plane" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
            
            </OverflowToolbar>
        </footer>
        <headerContent/>
        <subHeader/>
        <customHeader/>
    </Page>
</mvc:View>
