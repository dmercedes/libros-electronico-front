<mvc:View controllerName="missolicitudes.controller.Main"
    xmlns:table="sap.ui.table" 
    xmlns:mvc="sap.ui.core.mvc" 
    displayBlock="true"
    xmlns="sap.m" 
    xmlns:form="sap.ui.layout.form" 
    xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"
    >

    <Page showHeader="true" title="{i18n>title}" showFooter="true" showNavButton="false">
        <content>
            <Panel height="auto" width="100%" headerText="Filtros de Búsqueda" expandable="true" expanded="true" expandAnimation="true" backgroundDesign="Solid">
                <content>
                    <form:Form width="100%" editable="true" visible="true">
                        <form:title/>
                        <form:formContainers>
                            <form:FormContainer visible="true">
                                <form:formElements>
                                    <form:FormElement id="fe_fecha_inicio" visible="true">
                                        <form:label>
                                            <Label text="Fecha de Inicio" design="Standard" width="100%" required="true" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <DatePicker id="dp_fecha_inicio" valueFormat="yyyy-MM-dd" displayFormat="dd/MM/yyyy"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="nro_proyecto" visible="true">
                                        <form:label>
                                            <Label text="N° de Proyecto" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-nro-proyecto" items="{path: 'listaNroProyecto>/FILTRO_PROYECTO_NRO'}" placeholder="Seleccione número de proyecto" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onNroProyectoChange"
                                            selectedKey="{listaNroProyecto>/LLAVE}">
                                                <items>
                                                    <core:Item text="{listaNroProyecto>VALOR}" enabled="true" key="{listaNroProyecto>LLAVE}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="entregar_a" visible="true">
                                        <form:label>
                                            <Label text="Entregar a" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-entregar-a" items="{path: 'listaEntregarA>/FILTRO_ENTREGA_A'}" placeholder="Seleccione entregar a" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onEntregaAChange"
                                            selectedKey="{listaEntregarA>/LLAVE}">
                                                <items>
                                                    <core:Item text="{listaEntregarA>VALOR}" enabled="true" key="{listaEntregarA>LLAVE}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                </form:formElements>
                                <form:title/>
                            </form:FormContainer>
                            <form:FormContainer visible="true">
                                <form:formElements>
                                    <form:FormElement id="fe_fecha_fin" visible="true">
                                        <form:label>
                                            <Label text="Fecha de Fin" design="Standard" width="100%" required="true" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <DatePicker id="dp_fecha_fin" valueFormat="yyyy-MM-dd" displayFormat="dd/MM/yyyy"/>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="nombre_proyecto" visible="true">
                                        <form:label>
                                            <Label text="Nombre de Proyecto" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-nombre-proyecto" items="{path: 'listaNombreProyecto>/FILTRO_PROYECTO_NOMBRE'}" placeholder="Seleccione un proyecto" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onNombreProyectoChange"
                                            selectedKey="{listaNombreProyecto>/LLAVE}">
                                                <items>
                                                    <core:Item text="{listaNombreProyecto>VALOR}" enabled="true" key="{listaNombreProyecto>LLAVE}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement id="estado" visible="true">
                                        <form:label>
                                            <Label text="Estado" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <ComboBox id="cbo-estado" items="{path: 'listaEstado>/FILTRO_ESTADO'}" placeholder="Seleccione un estado" editable="true" enabled="true" visible="true" width="auto" valueState="None" maxWidth="100%"
                                            selectionChange="onEstadoChange"
                                            selectedKey="{listaEstado>/LLAVE}">
                                                <items>
                                                    <core:Item text="{listaEstado>VALOR}" enabled="true" key="{listaEstado>LLAVE}"/>
                                                </items>
                                            </ComboBox>
                                        </form:fields>
                                    </form:FormElement>
                                    <form:FormElement visible="true">
                                        <form:label>
                                            <Label text="" design="Standard" width="100%" required="false" textAlign="Begin" textDirection="Inherit" visible="true"/>
                                        </form:label>
                                        <form:fields>
                                            <HBox justifyContent="End" width="100%" >
                                                <Button
                                                    press="onBuscar"
                                                    id="btn-buscar"
                                                    text="Buscar"
                                                    type="Emphasized"
                                                    icon="sap-icon://search"
                                                    iconFirst="true"
                                                    width="100%"
                                                    enabled="true"
                                                    visible="true"
                                                    iconDensityAware="false"
                                                />
                                            </HBox>
                                        </form:fields>
                                    </form:FormElement>
                                </form:formElements>
                                <form:title/>
                            </form:FormContainer>
                        </form:formContainers>
                        <form:layout>
                            <form:ResponsiveGridLayout adjustLabelSpan="false" columnsL="2" labelSpanL="3" columnsM="1" labelSpanM="2" labelSpanS="12"/>
                        </form:layout>
                    </form:Form>
                </content>
            </Panel>
            <Panel height="auto" width="100%" headerText="Resultados" expandable="true" expanded="true" expandAnimation="true" backgroundDesign="Solid">
                        <headerToolbar>
                            <OverflowToolbar style="Clear">
                                <Title text="Resultados"/>
                                <ToolbarSpacer width=""/>
                                <Button press="onAgregar" text="Agregar" type="Default" icon="sap-icon://add-document" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                                <Button press="onDetalle" text="Detalle" type="Default" icon="sap-icon://detail-view" iconFirst="true" width="auto" enabled="true" visible="true" iconDensityAware="false"/>
                            </OverflowToolbar>
                        </headerToolbar>
                        <content>
                            <Table id="idSolicitudesTable" mode="SingleSelectLeft" items="{ path: 'SolicitudesModel>/SOLICITUD'}">
                                <columns>
                                    <Column visible="false">
                                        <Text text="ID SOLICITUD"/>
                                    </Column>
                                    <Column >
                                        <Text text="Número de Solicitud" />
                                    </Column>
                                    <Column >
                                        <Text text="Fecha de Solicitud" />
                                    </Column>
                                    <Column >
                                        <Text text="Empresa" />
                                    </Column>
                                    <Column >
                                        <Text text="N° de proyecto" />
                                    </Column>
                                    <Column >
                                        <Text text="Nombre de proyecto" />
                                    </Column>
                                    <Column >
                                        <Text text="Solicitante" />
                                    </Column>
                                    <Column >
                                        <Text text="Entregar a" />
                                    </Column>
                                    <Column >
                                        <Text text="Estado" />
                                    </Column>
                                    <Column >
                                        <Text text="Referencia" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <ObjectIdentifier text="{SolicitudesModel>ID_SOLICITUD}"/>
                                            <Text text="{SolicitudesModel>NRO_SOLICITUD}" />
                                            <Text text="{SolicitudesModel>FECHA_SOLICITUD}" />
                                            <Text text="{SolicitudesModel>EMPRESA}" />
                                            <Text text="{SolicitudesModel>NRO_PROYECTO}" />
                                            <Text text="{SolicitudesModel>NOMBRE_PROYECTO}" />
                                            <Text text="{SolicitudesModel>SOLICITANTE}" />
                                            <Text text="{SolicitudesModel>ENTREGAR_A}" />
                                            <Text text="{SolicitudesModel>ESTADO}" />
                                            <Text text="{SolicitudesModel>REFERENCIA}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </content>
                    </Panel>
        </content>
        <footer>
            <OverflowToolbar width="100%" height="46px" design="Auto" enabled="true" visible="true">
                  <ToolbarSpacer />
                                <Button id="BtnFirstPressId" icon="sap-icon://close-command-field" press="onFirstPress" tooltip="First" enabled="{NavModel>/firstPageBtnEnable}" />
                                <Button id="BtnPreviousPressId" icon="sap-icon://navigation-left-arrow" press="onPreviousPress" tooltip="Previous" enabled="{NavModel>/firstPageBtnEnable}" />
                                <Text id="PageTextId" text="{i18n>page} {SolicitudesModel>/PAGINA_ACTUAL} {i18n>of} {SolicitudesModel>/PAGINAS_TOTALES}" />
                                <Button id="BtnNextPressId" icon="sap-icon://navigation-right-arrow" press="onNextPress" tooltip="Next" enabled="{NavModel>/nextPageBtnEnable}" />
                                <Button id="BtnLastPressId" icon="sap-icon://open-command-field" press="onLastPress" tooltip="Last" enabled="{NavModel>/nextPageBtnEnable}" />
                            </OverflowToolbar>
        </footer>
        <headerContent/>
        <subHeader/>
        <customHeader/>
    </Page>
</mvc:View>
